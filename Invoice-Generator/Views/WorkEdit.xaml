<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:Invoice_Generator.Models"
             xmlns:local="clr-namespace:Invoice_Generator.ViewModels"
             x:Class="Invoice_Generator.Views.WorkEdit"
             x:DataType="local:WorkEditViewModel">
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Next"
                     IconImageSource=""
                     Command="{Binding NavigateNextCommand }"/>
    </ContentPage.ToolbarItems>
    <ContentPage.Content>
        <Grid RowDefinitions="Auto, Auto, *"
              ColumnDefinitions="*, *, *, *, Auto"
              Padding="50"
              RowSpacing="50"
              ColumnSpacing="10">
            
            <Label Grid.ColumnSpan = "5"
                   Text="What work is being invoiced?"/>
            
            <DatePicker Grid.Row="1"
                        MinimumDate="01/01/2000"
                        MaximumDate="12/31/2040"
                        Date="{Binding Work.Completed}"/>

            <Entry Grid.Row="1"
                   Grid.Column="1" 
                   Placeholder="Description"
                   Text="{Binding Work.Description}"/>
            
            <Entry Grid.Row="1"
                   Grid.Column="2" 
                   Placeholder="Hours"
                   Keyboard="Numeric"
                   Text="{Binding Work.Hours}"/>
            
            <Entry Grid.Row="1"
                   Grid.Column="3" 
                   Placeholder="Amount"
                   Keyboard="Numeric"
                   Text="{Binding Work.Amount}"/>

            <Button Grid.Row="1"
                    Grid.Column="4"
                    Text="Add"
                    Command="{Binding AddWorkCommand}"/>

            <CollectionView Grid.Row="2"
                            Grid.ColumnSpan="5"
                            SelectionMode="None"
                            ItemsSource="{Binding WorkList}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:WorkModel">
                        <Border>
                            <Grid ColumnDefinitions="*, *, *, *">
                                <Label Text="{Binding Completed, StringFormat='{0:d}'}"/>
                                <Label Grid.Column="1"
                                       Text="{Binding Description}"/>
                                <Label Grid.Column="2"
                                       Text="{Binding Hours}"/>
                                <Label Grid.Column="3"
                                       Text="{Binding Amount}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ContentPage.Content>
</ContentPage>